# auto generated by wconan2
default:
  name: WCDB
  version: 0.1.0
  build_types: static, shared
  build_configs: release

  dependencies:
    sqlcipher: 1.0.2-SNAPSHOT

  dependency_options:
    shared:
      default: false

  download:
    dir: ./wconan_libs
    recursive: true

  build:
    system: cmake
    arguments:

  outputs:
    headers: [ .wconan2/include ]


android:
  version: 1.0.7
  build_types: shared
  dependencies:
    sqlcipher: 1.0.4-SNAPSHOT

  options:
    auto_synthesis_aar: true

  build:
    system: cmake
    api_level: 21


ios:
  build_types: static
  build:
    system: custom
    # Build static lib. Add one more line with "ObjC" replaced by "Swift" to build swift version
    script: |-
      ../tools/version/build.sh -p iOS -l ObjC -c Release -d wconan_build/ios/release/static --wechat --disable-bitcode --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/ios/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/ios/release/static/output && \
      mv ${yaml_dir}/wconan_build/ios/release/static/WCDB.framework ${yaml_dir}/wconan_build/ios/release/static/output/

  outputs:
    release_static:
      all: wconan_build/ios/release/static/output


macos:
  build:
    system: custom
    # build static lib
    script: |-
      ../tools/version/build.sh -p macOS -l ObjC -c Release -d wconan_build/macos/release/static --wechat --disable-bitcode --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/macos/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/macos/release/static/output && \
      mv ${yaml_dir}/wconan_build/macos/release/static/WCDB.framework ${yaml_dir}/wconan_build/macos/release/static/output/

  outputs:
    release_static:
      all: wconan_build/macos/release/static/output


watchos:
  build:
    system: custom
    # build static lib
    script: |-
      ../tools/version/build.sh -p watchOS -l ObjC -c Release -d wconan_build/watchos/release/static --wechat --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/watchos/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/watchos/release/static/output && \
      mv ${yaml_dir}/wconan_build/watchos/release/static/WCDB.framework ${yaml_dir}/wconan_build/watchos/release/static/output/

  outputs:
    release_static:
      all: wconan_build/watchos/release/static/output


# windows:
