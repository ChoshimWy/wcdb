# auto generated by wconan2
default:
  name: wcdb-cpp
  version: 1.0.5
  build_types: static, shared
  build_configs: release

  dependencies:
    sqlcipher: 1.0.2-SNAPSHOT

  dependency_options:
    shared:
      default: false

  download:
    dir: ./wconan_libs
    recursive: true

  build:
    system: cmake
    arguments:

  outputs:
    headers: [ .wconan2/include ]


android:
  options:
    auto_synthesis_aar: true

  build:
    system: cmake
    api_level: 21


ios:
  build_types: static
  build:
    system: custom
    # build static and dynamic lib
    script: |-
      ../tools/version/build.sh -p iOS -l Cpp -c Release -d wconan_build/ios/release/shared --wechat --disable-bitcode && \
      ../tools/version/build.sh -p iOS -l Cpp -c Release -d wconan_build/ios/release/static --wechat --disable-bitcode --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/ios/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/ios/release/shared/output && \
      mv ${yaml_dir}/wconan_build/ios/release/shared/WCDB.framework ${yaml_dir}/wconan_build/ios/release/shared/output/ && \
      mkdir -p ${yaml_dir}/wconan_build/ios/release/static/output && \
      mv ${yaml_dir}/wconan_build/ios/release/static/WCDB.framework ${yaml_dir}/wconan_build/ios/release/static/output/

  outputs:
    release_shared:
      all: wconan_build/ios/release/shared/output
    release_static:
      all: wconan_build/ios/release/static/output


macos:
  build:
    system: custom
    # build static and dynamic lib
    script: |-
      ../tools/version/build.sh -p macOS -l Cpp -c Release -d wconan_build/macos/release/shared --wechat --disable-bitcode && \
      ../tools/version/build.sh -p macOS -l Cpp -c Release -d wconan_build/macos/release/static --wechat --disable-bitcode --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/macos/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/macos/release/shared/output && \
      mv ${yaml_dir}/wconan_build/macos/release/shared/WCDB.framework ${yaml_dir}/wconan_build/macos/release/shared/output/ && \
      mkdir -p ${yaml_dir}/wconan_build/macos/release/static/output && \
      mv ${yaml_dir}/wconan_build/macos/release/static/WCDB.framework ${yaml_dir}/wconan_build/macos/release/static/output/

  outputs:
    release_shared:
      all: wconan_build/macos/release/shared/output
    release_static:
      all: wconan_build/macos/release/static/output


watchos:
  build:
    system: custom
    # build static and dynamic lib
    script: |-
      ../tools/version/build.sh -p watchOS -l Cpp -c Release -d wconan_build/watchos/release/shared --wechat --disable-bitcode && \
      ../tools/version/build.sh -p watchOS -l Cpp -c Release -d wconan_build/watchos/release/static --wechat --disable-bitcode --static-framework

  dependencies:

  scripts:
    pre_build: 'rm -r ${yaml_dir}/wconan_build/watchos/release'
    post_build: |-
      mkdir -p ${yaml_dir}/wconan_build/watchos/release/shared/output && \
      mv ${yaml_dir}/wconan_build/watchos/release/shared/WCDB.framework ${yaml_dir}/wconan_build/watchos/release/shared/output/ && \
      mkdir -p ${yaml_dir}/wconan_build/watchos/release/static/output && \
      mv ${yaml_dir}/wconan_build/watchos/release/static/WCDB.framework ${yaml_dir}/wconan_build/watchos/release/static/output/

  outputs:
    release_shared:
      all: wconan_build/watchos/release/shared/output
    release_static:
      all: wconan_build/watchos/release/static/output


# windows:
